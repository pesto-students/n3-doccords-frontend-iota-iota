{"ast":null,"code":"var _jsxFileName = \"/Users/elango/Documents/pesto/iota-ninja3-doccords-frontend/src/components/Table/Table.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable react/prop-types */\n\n/* eslint-disable react/display-name */\nimport React, { useState, useEffect } from \"react\";\nimport MaterialTable from \"material-table\";\nimport { Grid, Avatar } from \"@material-ui/core\";\nimport { fetchAllProfilesAndDocuments, deleteAllProfilesAndDocuments } from \"apiRequests/user\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Button from \"@material-ui/core/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst relationship = [{\n  id: 1,\n  title: \"Self\"\n}, {\n  id: 2,\n  title: \"Spouse\"\n}, {\n  id: 3,\n  title: \"Father\"\n}, {\n  id: 4,\n  title: \"Mother\"\n}, {\n  id: 5,\n  title: \"Brother\"\n}, {\n  id: 6,\n  title: \"Sister\"\n}, {\n  id: 7,\n  title: \"Child\"\n}, {\n  id: 8,\n  title: \"Others\"\n}];\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    // border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    borderRadius: \"2%\"\n  },\n  button_yes: {\n    backgroundColor: \"#ed5e68\",\n    color: \"#fff\"\n  },\n  button_no: {\n    backgroundColor: \"#8388a4\",\n    marginLeft: \"1rem\",\n    color: \"#fff\"\n  },\n  button_create: {\n    color: \"#fff\",\n    marginBottom: \"2rem\",\n    alignSelf: \"start\"\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7)\n  }\n}));\nconst modalStyle = {\n  top: \"50%\",\n  left: `50%`,\n  transform: `translate(-50%, -50%)`\n};\n\nconst Table = props => {\n  _s();\n\n  // eslint-disable-next-line react/prop-types\n  const {\n    add,\n    edit,\n    fetchAllProfilesAndDocuments,\n    profiles,\n    documents,\n    deleteAllProfilesAndDocuments\n  } = props;\n  const history = useHistory();\n  const [rows, setRows] = useState([]);\n  const [isMultipleSelection, setIsMultipleSelection] = React.useState(false);\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [selectedProfiles, setSelectedProfiles] = useState([]);\n  const [selectedDocs, setSelectedDocs] = useState([]);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    fetchAllProfilesAndDocuments();\n  }, []);\n  useEffect(() => {\n    setRows(modifyProfiles());\n  }, [documents, profiles]);\n\n  const modifyProfiles = () => {\n    const modified = profiles.map(profile => {\n      const filteredDocuments = documents.filter(document => document.profileId === profile.profileId);\n      profile.uploadedDoc = filteredDocuments.length;\n      let shared = 0;\n      filteredDocuments.map(filtered => {\n        shared = shared + filtered.sharedList.length;\n        return filtered;\n      });\n      return {\n        name: profile.profileName,\n        picture: profile.picture,\n        relationshipId: relationship[profile.relationshipId - 1].title,\n        uploadedDoc: profile.uploadedDoc,\n        sharedDoc: shared,\n        profileId: profile.profileId\n      };\n    });\n    return modified;\n  };\n\n  const columns = [{\n    title: \"Picture\",\n    field: \"picture\",\n    render: rowData => /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      alignItems: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        md: 4,\n        xs: 6,\n        children: rowdata.picture ? /*#__PURE__*/_jsxDEV(Avatar, {\n          alt: rowData.profileName,\n          src: rowData.picture,\n          className: classes.large\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n          children: rowData.name[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: \"Name\",\n    field: \"name\",\n    render: rowData => /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      alignItems: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        md: 8,\n        children: rowData.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: \"Relationship\",\n    field: \"relationshipId\"\n  }, {\n    title: \"Uploaded Doc\",\n    field: \"uploadedDoc\"\n  }, {\n    title: \"Shared Doc\",\n    field: \"sharedDoc\"\n  }];\n\n  const calculateSelectedProfilesAndDocs = rowData => {\n    const profileIds = rowData.map(row => row.profileId);\n    const docIds = profileIds.map(id => {\n      const filteredArray = documents.filter(doc => id === doc.profileId);\n      return filteredArray;\n    }).flat(1).map(doc => doc.documentId);\n    setSelectedProfiles(profileIds);\n    setSelectedDocs(docIds);\n  };\n\n  const deleteProfiles = rowData => {\n    const profileIds = rowData.map(row => row.profileId);\n    const docIds = profileIds.map(id => {\n      const filteredArray = documents.filter(doc => id === doc.profileId);\n      return filteredArray;\n    }).flat(1).map(doc => doc.documentId);\n    deleteAllProfilesAndDocuments(profileIds, docIds, history);\n  }; // const handlADDClick () => {\n  // }\n  // const handlDeleteClick () => {\n  // }\n\n\n  const handlEditClick = (event, rowsData) => {\n    const filtered = profiles.filter(profile => rowsData[0].profileId === profile.profileId);\n    const selectedProfile = filtered[0];\n    console.log(selectedProfile);\n    history.push({\n      pathname: `/profiles/edit`,\n      state: selectedProfile\n    });\n  }; // const handlNameClick () => {\n  // }\n\n\n  const body = /*#__PURE__*/_jsxDEV(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"simple-modal-profiles\",\n      children: [\"Are you sure, you want to share \", selectedDocs.length, \" document with the below mentioned email id\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        className: classes.button_yes // onClick={clickedYes}\n        ,\n        children: \"Yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        className: classes.button_no // onClick={handleClose}\n        ,\n        children: \"No\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(MaterialTable, {\n      title: \"Profiles Table\",\n      data: rows,\n      onSelectionChange: rows => {\n        rows.length > 1 ? setIsMultipleSelection(true) : setIsMultipleSelection(false);\n        console.log(rows.length);\n      },\n      columns: columns // editable={\n      //   onRowUpdate:()=>(newData)=>null,\n      // }\n      ,\n      options: {\n        search: true,\n        paging: false,\n        // filtering: true,\n        // exportButton: true,\n        selection: true\n      },\n      actions: [{\n        icon: \"share\",\n        tooltip: \"Share Profile\",\n        onClick: (event, rowData) => {\n          calculateSelectedProfilesAndDocs(rowData);\n          setOpen(true);\n        }\n      }, {\n        icon: \"edit\",\n        tooltip: isMultipleSelection ? \"You can edit only one profile\" : \"Edit Profile\",\n        onClick: (event, rowsData) => handlEditClick(event, rowsData),\n        disabled: isMultipleSelection\n      }, {\n        icon: \"add\",\n        tooltip: \"Add Profile\",\n        isFreeAction: true,\n        onClick: event => add()\n      }, {\n        icon: \"delete\",\n        tooltip: \"Delete User\",\n        onClick: (event, rowData) => {\n          deleteProfiles(rowData);\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"simple-modal-profiles\",\n      \"aria-describedby\": \"simple-modal-description\",\n      children: body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Table, \"KAs8q5hRFenUEcJT/WexgbyOvFk=\", false, function () {\n  return [useHistory, useStyles];\n});\n\n_c = Table;\n\nconst mapStateToProps = state => ({\n  profiles: state.user.profiles,\n  documents: state.user.documents\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchAllProfilesAndDocuments: () => dispatch(fetchAllProfilesAndDocuments()),\n  deleteAllProfilesAndDocuments: (profiles, documents, history) => dispatch(deleteAllProfilesAndDocuments(profiles, documents, history))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Table);\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"sources":["/Users/elango/Documents/pesto/iota-ninja3-doccords-frontend/src/components/Table/Table.js"],"names":["React","useState","useEffect","MaterialTable","Grid","Avatar","fetchAllProfilesAndDocuments","deleteAllProfilesAndDocuments","connect","useHistory","makeStyles","Modal","Button","relationship","id","title","useStyles","theme","paper","position","width","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","borderRadius","button_yes","color","button_no","marginLeft","button_create","marginBottom","alignSelf","large","height","modalStyle","top","left","transform","Table","props","add","edit","profiles","documents","history","rows","setRows","isMultipleSelection","setIsMultipleSelection","classes","open","setOpen","selectedProfiles","setSelectedProfiles","selectedDocs","setSelectedDocs","handleClose","modifyProfiles","modified","map","profile","filteredDocuments","filter","document","profileId","uploadedDoc","length","shared","filtered","sharedList","name","profileName","picture","relationshipId","sharedDoc","columns","field","render","rowData","rowdata","calculateSelectedProfilesAndDocs","profileIds","row","docIds","filteredArray","doc","flat","documentId","deleteProfiles","handlEditClick","event","rowsData","selectedProfile","console","log","push","pathname","state","body","search","paging","selection","icon","tooltip","onClick","disabled","isFreeAction","mapStateToProps","user","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/display-name */\nimport React, { useState, useEffect } from \"react\";\nimport MaterialTable from \"material-table\";\nimport { Grid, Avatar } from \"@material-ui/core\";\nimport {\n  fetchAllProfilesAndDocuments,\n  deleteAllProfilesAndDocuments,\n} from \"apiRequests/user\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Button from \"@material-ui/core/Button\";\n\nconst relationship = [\n  { id: 1, title: \"Self\" },\n  { id: 2, title: \"Spouse\" },\n  { id: 3, title: \"Father\" },\n  { id: 4, title: \"Mother\" },\n  { id: 5, title: \"Brother\" },\n  { id: 6, title: \"Sister\" },\n  { id: 7, title: \"Child\" },\n  { id: 8, title: \"Others\" },\n];\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    // border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    borderRadius: \"2%\",\n  },\n  button_yes: {\n    backgroundColor: \"#ed5e68\",\n    color: \"#fff\",\n  },\n  button_no: {\n    backgroundColor: \"#8388a4\",\n    marginLeft: \"1rem\",\n    color: \"#fff\",\n  },\n  button_create: {\n    color: \"#fff\",\n    marginBottom: \"2rem\",\n    alignSelf: \"start\",\n  },\n  large: {\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n  },\n}));\nconst modalStyle = {\n  top: \"50%\",\n  left: `50%`,\n  transform: `translate(-50%, -50%)`,\n};\n\nconst Table = (props) => {\n  // eslint-disable-next-line react/prop-types\n  const {\n    add,\n    edit,\n    fetchAllProfilesAndDocuments,\n    profiles,\n    documents,\n    deleteAllProfilesAndDocuments,\n  } = props;\n  const history = useHistory();\n  const [rows, setRows] = useState([]);\n  const [isMultipleSelection, setIsMultipleSelection] = React.useState(false);\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [selectedProfiles, setSelectedProfiles] = useState([]);\n  const [selectedDocs, setSelectedDocs] = useState([]);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    fetchAllProfilesAndDocuments();\n  }, []);\n\n  useEffect(() => {\n    setRows(modifyProfiles());\n  }, [documents, profiles]);\n\n  const modifyProfiles = () => {\n    const modified = profiles.map((profile) => {\n      const filteredDocuments = documents.filter(\n        (document) => document.profileId === profile.profileId\n      );\n      profile.uploadedDoc = filteredDocuments.length;\n      let shared = 0;\n      filteredDocuments.map((filtered) => {\n        shared = shared + filtered.sharedList.length;\n        return filtered;\n      });\n      return {\n        name: profile.profileName,\n        picture: profile.picture,\n        relationshipId: relationship[profile.relationshipId - 1].title,\n        uploadedDoc: profile.uploadedDoc,\n        sharedDoc: shared,\n        profileId: profile.profileId,\n      };\n    });\n    return modified;\n  };\n\n  const columns = [\n    {\n      title: \"Picture\",\n      field: \"picture\",\n      render: (rowData) => (\n        <Grid container alignItems=\"center\">\n          <Grid item md={4} xs={6}>\n            {rowdata.picture ? (\n              <Avatar\n                alt={rowData.profileName}\n                src={rowData.picture}\n                className={classes.large}\n              />\n            ) : (\n              <Avatar>{rowData.name[0]}</Avatar>\n            )}\n          </Grid>\n        </Grid>\n      ),\n    },\n    {\n      title: \"Name\",\n      field: \"name\",\n      render: (rowData) => (\n        <Grid container alignItems=\"center\">\n          <Grid item xs={6} md={8}>\n            {rowData.name}\n          </Grid>\n        </Grid>\n      ),\n    },\n    {\n      title: \"Relationship\",\n      field: \"relationshipId\",\n    },\n    {\n      title: \"Uploaded Doc\",\n      field: \"uploadedDoc\",\n    },\n    {\n      title: \"Shared Doc\",\n      field: \"sharedDoc\",\n    },\n  ];\n  const calculateSelectedProfilesAndDocs = (rowData) => {\n    const profileIds = rowData.map((row) => row.profileId);\n    const docIds = profileIds\n      .map((id) => {\n        const filteredArray = documents.filter((doc) => id === doc.profileId);\n        return filteredArray;\n      })\n      .flat(1)\n      .map((doc) => doc.documentId);\n    setSelectedProfiles(profileIds);\n    setSelectedDocs(docIds);\n  };\n  const deleteProfiles = (rowData) => {\n    const profileIds = rowData.map((row) => row.profileId);\n    const docIds = profileIds\n      .map((id) => {\n        const filteredArray = documents.filter((doc) => id === doc.profileId);\n        return filteredArray;\n      })\n      .flat(1)\n      .map((doc) => doc.documentId);\n    deleteAllProfilesAndDocuments(profileIds, docIds, history);\n  };\n\n  // const handlADDClick () => {\n\n  // }\n  // const handlDeleteClick () => {\n\n  // }\n  const handlEditClick = (event, rowsData) => {\n    const filtered = profiles.filter(\n      (profile) => rowsData[0].profileId === profile.profileId\n    );\n    const selectedProfile = filtered[0];\n    console.log(selectedProfile);\n    history.push({\n      pathname: `/profiles/edit`,\n      state: selectedProfile,\n    });\n  };\n\n  // const handlNameClick () => {\n\n  // }\n  const body = (\n    <div style={modalStyle} className={classes.paper}>\n      <p id=\"simple-modal-profiles\">\n        Are you sure, you want to share {selectedDocs.length} document with the\n        below mentioned email id\n      </p>\n      <div>\n        <Button\n          variant=\"contained\"\n          className={classes.button_yes}\n          // onClick={clickedYes}\n        >\n          Yes\n        </Button>\n        <Button\n          variant=\"contained\"\n          className={classes.button_no}\n          // onClick={handleClose}\n        >\n          No\n        </Button>\n      </div>\n    </div>\n  );\n  return (\n    <div>\n      <MaterialTable\n        title=\"Profiles Table\"\n        data={rows}\n        onSelectionChange={(rows) => {\n          rows.length > 1\n            ? setIsMultipleSelection(true)\n            : setIsMultipleSelection(false);\n          console.log(rows.length);\n        }}\n        columns={columns}\n        // editable={\n        //   onRowUpdate:()=>(newData)=>null,\n        // }\n        options={{\n          search: true,\n          paging: false,\n          // filtering: true,\n          // exportButton: true,\n          selection: true,\n        }}\n        actions={[\n          {\n            icon: \"share\",\n            tooltip: \"Share Profile\",\n            onClick: (event, rowData) => {\n              calculateSelectedProfilesAndDocs(rowData);\n              setOpen(true);\n            },\n          },\n          {\n            icon: \"edit\",\n            tooltip: isMultipleSelection\n              ? \"You can edit only one profile\"\n              : \"Edit Profile\",\n            onClick: (event, rowsData) => handlEditClick(event, rowsData),\n            disabled: isMultipleSelection,\n          },\n          {\n            icon: \"add\",\n            tooltip: \"Add Profile\",\n            isFreeAction: true,\n            onClick: (event) => add(),\n          },\n          {\n            icon: \"delete\",\n            tooltip: \"Delete User\",\n            onClick: (event, rowData) => {\n              deleteProfiles(rowData);\n            },\n          },\n        ]}\n      />\n      <Modal\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"simple-modal-profiles\"\n        aria-describedby=\"simple-modal-description\"\n      >\n        {body}\n      </Modal>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  profiles: state.user.profiles,\n  documents: state.user.documents,\n});\nconst mapDispatchToProps = (dispatch) => ({\n  fetchAllProfilesAndDocuments: () => dispatch(fetchAllProfilesAndDocuments()),\n  deleteAllProfilesAndDocuments: (profiles, documents, history) =>\n    dispatch(deleteAllProfilesAndDocuments(profiles, documents, history)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Table);\n"]},"metadata":{},"sourceType":"module"}