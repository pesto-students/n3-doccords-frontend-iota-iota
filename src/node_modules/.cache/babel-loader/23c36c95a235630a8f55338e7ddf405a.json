{"ast":null,"code":"import axios from \"axios\";\nimport { setAccessToken, setUserDetial, setLoading, deleteUserDetail, setProfilesAndDocuments, setProfiles } from \"redux/actions/user\";\nimport { setUploadedImageURL } from \"redux/actions/common\";\nimport { fetchTokenFromServer, currentUser } from \"context/AuthContext\";\nimport customAxios from \"apiRequests/customAxios\";\nimport { USER_PROFILE_URL, USER_DOCUMENTS_URL } from \"apiRequests/constants\";\nexport const fetchUserDetail = async dispatch => {\n  const idToken = await fetchTokenFromServer();\n  dispatch(setAccessToken(idToken));\n  localStorage.setItem(\"doccords_user\", JSON.stringify({\n    accessToken: idToken\n  }));\n  const userDetail = await axios.post(\"http://localhost:5001/api/v1/users\", {\n    profileName: currentUser().displayName,\n    email: currentUser().email,\n    phone: currentUser().phoneNumber,\n    profilePic: currentUser().photoURL\n  }, {\n    headers: {\n      Authorization: \"Bearer \" + idToken,\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  dispatch(setUserDetial(userDetail.data.user));\n  dispatch(setLoading(false));\n};\nexport const clearUserDetail = async dispatch => {\n  dispatch(deleteUserDetail);\n};\nexport const createNewProfile = (newProfileData, history) => async (dispatch, getState) => {\n  const {\n    picture,\n    relationshipId,\n    profileName,\n    age,\n    email,\n    phone,\n    gender,\n    knownIssues\n  } = newProfileData;\n  const createdUser = await customAxios.post(USER_PROFILE_URL, {\n    picture,\n    relationshipId,\n    profileName,\n    age,\n    email,\n    phone,\n    gender,\n    knownIssues\n  });\n\n  if (createdUser.data.success) {\n    dispatch(setUploadedImageURL(\"\"));\n    history.push(\"/profiles\");\n  }\n};\nexport const fetchAllProfiles = () => async (dispatch, getState) => {\n  const allProfiles = await customAxios.get(USER_PROFILE_URL);\n\n  if (allProfiles.data.success) {\n    dispatch(setProfiles(allProfiles.data.data));\n  }\n};\nexport const fetchAllDocuments = () => async (dispatch, getState) => {\n  const allDocuments = await customAxios.get(USER_DOCUMENTS_URL);\n\n  if (allDocuments.data.success) {\n    dispatch(setProfiles(allDocuments.data.data));\n  }\n};\nexport const fetchAllProfilesAndDocuments = () => async (dispatch, getState) => {\n  const promises = [customAxios.get(USER_PROFILE_URL), customAxios.get(USER_DOCUMENTS_URL)];\n  const response = await Promise.all(promises);\n  dispatch(setProfilesAndDocuments({\n    profiles: response[0].data.data,\n    documents: response[1].data.data\n  }));\n};\nexport const deleteAllProfilesAndDocuments = (profiles, documents, history) => async (dispatch, getState) => {\n  const deletedRes = await customAxios.delete(USER_PROFILE_URL, {\n    data: {\n      profiles,\n      documents\n    }\n  });\n\n  if (deletedRes.data.success) {\n    dispatch(fetchAllProfilesAndDocuments());\n    history.push(\"/profiles\");\n  }\n};\nexport const updateProfile = (newProfileData, history) => async (dispatch, getState) => {\n  const {\n    profileId,\n    picture,\n    relationshipId,\n    profileName,\n    age,\n    email,\n    phone,\n    gender,\n    knownIssues\n  } = newProfileData;\n  const createdUser = await customAxios.put(`${USER_PROFILE_URL}/${profileId}`, {\n    picture,\n    relationshipId,\n    profileName,\n    age,\n    email,\n    phone,\n    gender,\n    knownIssues\n  });\n\n  if (createdUser.data.success) {\n    dispatch(setUploadedImageURL(\"\"));\n    history.push(\"/profiles\");\n  }\n};\nexport const createDoc = doc => async (dispatch, getState) => {\n  const {\n    name,\n    link,\n    healthTopicId,\n    profileId\n  } = doc;\n  const data = {\n    name,\n    link,\n    healthTopicId,\n    profileId\n  };\n};","map":{"version":3,"sources":["/Users/elango/Documents/pesto/iota-ninja3-doccords-frontend/src/apiRequests/user.js"],"names":["axios","setAccessToken","setUserDetial","setLoading","deleteUserDetail","setProfilesAndDocuments","setProfiles","setUploadedImageURL","fetchTokenFromServer","currentUser","customAxios","USER_PROFILE_URL","USER_DOCUMENTS_URL","fetchUserDetail","dispatch","idToken","localStorage","setItem","JSON","stringify","accessToken","userDetail","post","profileName","displayName","email","phone","phoneNumber","profilePic","photoURL","headers","Authorization","data","user","clearUserDetail","createNewProfile","newProfileData","history","getState","picture","relationshipId","age","gender","knownIssues","createdUser","success","push","fetchAllProfiles","allProfiles","get","fetchAllDocuments","allDocuments","fetchAllProfilesAndDocuments","promises","response","Promise","all","profiles","documents","deleteAllProfilesAndDocuments","deletedRes","delete","updateProfile","profileId","put","createDoc","doc","name","link","healthTopicId"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {\n  setAccessToken,\n  setUserDetial,\n  setLoading,\n  deleteUserDetail,\n  setProfilesAndDocuments,\n  setProfiles,\n} from \"redux/actions/user\";\nimport { setUploadedImageURL } from \"redux/actions/common\";\nimport { fetchTokenFromServer, currentUser } from \"context/AuthContext\";\nimport customAxios from \"apiRequests/customAxios\";\nimport { USER_PROFILE_URL, USER_DOCUMENTS_URL } from \"apiRequests/constants\";\n\nexport const fetchUserDetail = async (dispatch) => {\n  const idToken = await fetchTokenFromServer();\n  dispatch(setAccessToken(idToken));\n  localStorage.setItem(\n    \"doccords_user\",\n    JSON.stringify({ accessToken: idToken })\n  );\n\n  const userDetail = await axios.post(\n    \"http://localhost:5001/api/v1/users\",\n    {\n      profileName: currentUser().displayName,\n      email: currentUser().email,\n      phone: currentUser().phoneNumber,\n      profilePic: currentUser().photoURL,\n    },\n    {\n      headers: {\n        Authorization: \"Bearer \" + idToken,\n        \"Content-Type\": \"application/json\",\n      },\n    }\n  );\n  dispatch(setUserDetial(userDetail.data.user));\n  dispatch(setLoading(false));\n};\n\nexport const clearUserDetail = async (dispatch) => {\n  dispatch(deleteUserDetail);\n};\n\nexport const createNewProfile =\n  (newProfileData, history) => async (dispatch, getState) => {\n    const {\n      picture,\n      relationshipId,\n      profileName,\n      age,\n      email,\n      phone,\n      gender,\n      knownIssues,\n    } = newProfileData;\n    const createdUser = await customAxios.post(USER_PROFILE_URL, {\n      picture,\n      relationshipId,\n      profileName,\n      age,\n      email,\n      phone,\n      gender,\n      knownIssues,\n    });\n    if (createdUser.data.success) {\n      dispatch(setUploadedImageURL(\"\"));\n      history.push(\"/profiles\");\n    }\n  };\n\nexport const fetchAllProfiles = () => async (dispatch, getState) => {\n  const allProfiles = await customAxios.get(USER_PROFILE_URL);\n  if (allProfiles.data.success) {\n    dispatch(setProfiles(allProfiles.data.data));\n  }\n};\nexport const fetchAllDocuments = () => async (dispatch, getState) => {\n  const allDocuments = await customAxios.get(USER_DOCUMENTS_URL);\n  if (allDocuments.data.success) {\n    dispatch(setProfiles(allDocuments.data.data));\n  }\n};\nexport const fetchAllProfilesAndDocuments =\n  () => async (dispatch, getState) => {\n    const promises = [\n      customAxios.get(USER_PROFILE_URL),\n      customAxios.get(USER_DOCUMENTS_URL),\n    ];\n    const response = await Promise.all(promises);\n    dispatch(\n      setProfilesAndDocuments({\n        profiles: response[0].data.data,\n        documents: response[1].data.data,\n      })\n    );\n  };\nexport const deleteAllProfilesAndDocuments =\n  (profiles, documents, history) => async (dispatch, getState) => {\n    const deletedRes = await customAxios.delete(USER_PROFILE_URL, {\n      data: {\n        profiles,\n        documents,\n      },\n    });\n    if (deletedRes.data.success) {\n      dispatch(fetchAllProfilesAndDocuments());\n      history.push(\"/profiles\");\n    }\n  };\n\nexport const updateProfile =\n  (newProfileData, history) => async (dispatch, getState) => {\n    const {\n      profileId,\n      picture,\n      relationshipId,\n      profileName,\n      age,\n      email,\n      phone,\n      gender,\n      knownIssues,\n    } = newProfileData;\n    const createdUser = await customAxios.put(\n      `${USER_PROFILE_URL}/${profileId}`,\n      {\n        picture,\n        relationshipId,\n        profileName,\n        age,\n        email,\n        phone,\n        gender,\n        knownIssues,\n      }\n    );\n    if (createdUser.data.success) {\n      dispatch(setUploadedImageURL(\"\"));\n      history.push(\"/profiles\");\n    }\n  };\n\nexport const createDoc = (doc) => async (dispatch, getState) => {\n  const { name, link, healthTopicId, profileId } = doc;\n  const data = {\n    name,\n    link,\n    healthTopicId,\n    profileId,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}