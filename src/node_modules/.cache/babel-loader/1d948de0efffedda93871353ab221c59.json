{"ast":null,"code":"var _jsxFileName = \"/Users/elango/Documents/pesto/iota-ninja3-doccords-frontend/src/pages/admin/adminHealthTopics/adminHealthTopic.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Spinner from \"./Spinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminHealthTopic = () => {\n  _s();\n\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [fileName, setFileName] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [buttonText, setButtonText] = useState(\"Select your file first\"); // Handling file selection from input\n\n  const onFileSelected = e => {\n    if (e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n      setFileName(e.target.files[0].name);\n      setIsDisabled(false); // Enabling upload button\n\n      setButtonText(\"Let's upload this!\");\n    }\n  }; // Setting image preview\n\n\n  useEffect(() => {\n    if (selectedFile) {\n      const reader = new FileReader();\n\n      reader.onloadend = () => setPreview(reader.result);\n\n      reader.readAsDataURL(selectedFile);\n    }\n  }, [selectedFile]); // Uploading image to Cloud Storage\n\n  const handleFileUpload = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsDisabled(true);\n    setButtonText(\"Wait we're uploading your file...\");\n\n    try {\n      if (selectedFile !== \"\") {\n        // Creating a FormData object\n        let fileData = new FormData(); // Adding the 'image' field and the selected file as value to our FormData object\n        // Changing file name to make it unique and avoid potential later overrides\n\n        fileData.set(\"image\", selectedFile, `${Date.now()}-${selectedFile.name}`);\n        await axios({\n          method: \"post\",\n          url: process.env.REACT_APP_UPLOAD_API_URL,\n          data: fileData,\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n        setIsLoading(false);\n        setIsSuccess(true); // Reset to default values after 3 seconds\n\n        setTimeout(() => {\n          setSelectedFile(null);\n          setPreview(null);\n          setIsSuccess(false);\n          setFileName(null);\n          setButtonText(\"Select your file first\");\n        }, 3000);\n      }\n    } catch (error) {\n      setIsLoading(false);\n      setIsError(true);\n      setFileName(null);\n      setTimeout(() => {\n        setIsError(false);\n        setButtonText(\"Select your file first\");\n      }, 3000);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"This is create and edit article page\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 10\n  }, this);\n};\n\n_s(AdminHealthTopic, \"xxWp/cryUYxsuBjw7vNZpkO0zm0=\");\n\n_c = AdminHealthTopic;\nexport default AdminHealthTopic;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminHealthTopic\");","map":{"version":3,"sources":["/Users/elango/Documents/pesto/iota-ninja3-doccords-frontend/src/pages/admin/adminHealthTopics/adminHealthTopic.js"],"names":["React","useState","useEffect","Spinner","AdminHealthTopic","selectedFile","setSelectedFile","fileName","setFileName","preview","setPreview","isDisabled","setIsDisabled","isLoading","setIsLoading","isError","setIsError","isSuccess","setIsSuccess","buttonText","setButtonText","onFileSelected","e","target","files","name","reader","FileReader","onloadend","result","readAsDataURL","handleFileUpload","preventDefault","fileData","FormData","set","Date","now","axios","method","url","process","env","REACT_APP_UPLOAD_API_URL","data","headers","setTimeout","error"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Spinner from \"./Spinner\";\n\nconst AdminHealthTopic = () => {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [fileName, setFileName] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [buttonText, setButtonText] = useState(\"Select your file first\");\n\n  // Handling file selection from input\n  const onFileSelected = (e) => {\n    if (e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n      setFileName(e.target.files[0].name);\n      setIsDisabled(false); // Enabling upload button\n      setButtonText(\"Let's upload this!\");\n    }\n  };\n\n  // Setting image preview\n  useEffect(() => {\n    if (selectedFile) {\n      const reader = new FileReader();\n      reader.onloadend = () => setPreview(reader.result);\n      reader.readAsDataURL(selectedFile);\n    }\n  }, [selectedFile]);\n\n  // Uploading image to Cloud Storage\n  const handleFileUpload = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsDisabled(true);\n    setButtonText(\"Wait we're uploading your file...\");\n\n    try {\n      if (selectedFile !== \"\") {\n        // Creating a FormData object\n        let fileData = new FormData();\n\n        // Adding the 'image' field and the selected file as value to our FormData object\n        // Changing file name to make it unique and avoid potential later overrides\n        fileData.set(\n          \"image\",\n          selectedFile,\n          `${Date.now()}-${selectedFile.name}`\n        );\n\n        await axios({\n          method: \"post\",\n          url: process.env.REACT_APP_UPLOAD_API_URL,\n          data: fileData,\n          headers: { \"Content-Type\": \"multipart/form-data\" },\n        });\n\n        setIsLoading(false);\n        setIsSuccess(true);\n\n        // Reset to default values after 3 seconds\n        setTimeout(() => {\n          setSelectedFile(null);\n          setPreview(null);\n          setIsSuccess(false);\n          setFileName(null);\n          setButtonText(\"Select your file first\");\n        }, 3000);\n      }\n    } catch (error) {\n      setIsLoading(false);\n      setIsError(true);\n      setFileName(null);\n\n      setTimeout(() => {\n        setIsError(false);\n        setButtonText(\"Select your file first\");\n      }, 3000);\n    }\n  };\n\n  return <div>This is create and edit article page</div>;\n};\n\nexport default AdminHealthTopic;\n"]},"metadata":{},"sourceType":"module"}